import matplotlib.pyplot as plt
import numpy as np
import random as rd

file = "10"
case = "1"

start_stop = np.loadtxt("C:\\Users\Morgan\Videos\Videos_Pipe_0.25in_46cm\StartStop_2D.txt")
x = np.loadtxt("C:\\Users\Morgan\Videos\Videos_Pipe_0.25in_46cm\X_"+file+"Hz"+case+".txt")
z = np.loadtxt("C:\\Users\Morgan\Videos\Videos_Pipe_0.25in_46cm\Z_"+file+"Hz"+case+".txt")
file_id = np.where(start_stop[:,2]==float(file))[0]
case_id = np.where(start_stop[:,3]==float(case))[0]
frame_id = np.intersect1d(file_id, case_id)
start = int(start_stop[frame_id,0])
stop = int(start_stop[frame_id,1])

x_PINN = []
z_PINN = []
t_PINN = []

for i in range(5000):
    frame = rd.randint(start,stop)
    position = rd.randint(0,99)
    x_PINN.append(x[frame,position])
    z_PINN.append(z[frame,position])
    t_PINN.append((frame-start)/150)
    
x_PINN_val = []
z_PINN_val = []
t_PINN_val = []

for i in range(5000):
    frame = rd.randint(start,stop)
    position = rd.randint(0,99)
    x_PINN_val.append(x[frame,position])
    z_PINN_val.append(z[frame,position])
    t_PINN_val.append((frame-start)/150)

# plt.scatter(t_PINN,z_PINN)
# plt.show()

# plt.scatter(x_PINN,z_PINN)
# plt.show()
# for i in range(start,stop):
#     x_frame = x[i]
#     z_frame = z[i]
#     plt.plot(x_frame,z_frame)
#     plt.ylim([0,0.5])
#     plt.xlim([-0.2,0.2])
#     plt.gca().invert_yaxis()
#     plt.show()

np.savetxt("C:\\Users\Morgan\Videos\Videos_Pipe_0.25in_46cm\Training_Data_"+str(5000)+"Points_PINN_"+file+"Hz_"+case+".txt",np.array([x_PINN,z_PINN,t_PINN]))
np.savetxt("C:\\Users\Morgan\Videos\Videos_Pipe_0.25in_46cm\Validation_Data_"+str(5000)+"Points_PINN_"+file+"Hz_"+case+".txt",np.array([x_PINN_val,z_PINN_val,t_PINN_val]))